<!DOCTYPE html>
<!-- Page generated 2022-07-02 18:27:36 +0000-->
<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex"/><title>Legacy container links | Docker Documentation</title>
  <meta name="description" content="Learn how to connect Docker containers together." />
  <meta name="keywords" content="Examples, Usage, user guide, links, linking, docker, documentation, examples, names, name, container naming, port, map, network port, network">
  <link rel="canonical" href="https://localhost:4000/network/links/" />

  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/favicons/docs@2x.ico" sizes="129x128">
  <link rel="apple-touch-icon" type="image/x-icon" href="/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/favicons/docs@2x.ico">
  <meta property="og:image" content="/favicons/docs@2x.ico"/>
  <meta name="theme-color" content="#2496ed" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- hide elements that are only shown without JavaScript enabled -->
  <script>document.documentElement.classList.add('js')</script>
  <style>html.js .no-js { display: none !important; }</style><script defer src="/js/theme-switcher.js"></script>
  <script defer src="/js/anchorlinks.js"></script>
  <script defer src="/js/jquery.js"></script>
  <script defer src="/js/bootstrap.min.js"></script>
  <script defer src="/js/docs.js"></script><link rel="preload" as="font" href="https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/geomanist/hinted-Geomanist-Book.woff2"    type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/geomanist/hinted-Geomanist-Regular.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/glyphicons-halflings-regular.woff2"       type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/fontawesome-webfont.woff2?v=4.7.0"        type="font/woff2" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css" id="pagestyle">

  <!-- SEO stuff -->
  <meta name="twitter:title" itemprop="title name" content="Legacy container links"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="" />
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:domain" content="docs.docker.com"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:image:src" content="https://docs.docker.com/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker Documentation"/>
  <meta property="og:title" content="Legacy container links" />
  <meta property="og:description" content="Learn how to connect Docker containers together." />
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2022-07-02T18:27:36+00:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="https://docs.docker.com/images/docs@2x.png"/>
  <meta property="og:locale" content="en_US" />
  <meta property="og:url" content="https://docs.docker.com/network/links/" />
  <meta property="og:site_name" content="Docker Documentation" />
  <meta property="article:published_time" itemprop="datePublished" content="2022-07-02T18:27:36+00:00"/>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","headline":"Legacy container links","description":"Learn how to connect Docker containers together.","url":"https://docs.docker.com/network/links/"}</script>
  <!-- END SEO STUFF -->
</head>
<body class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/">
                <img class="logo" src="/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs" width="160" height="28" />
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/">
        <img src="/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs" width="30" height="30" />
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline" id="searchForm" action="/search/" method="get">
        <label for="st-search-input" class="sr-only">Search</label>
        <input class="search-field form-control ds-input" id="st-search-input" name="q" placeholder="Search the docs" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteResults"></div>
        <!-- <button type="submit" class="search-submit btn btn-default">Search</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div>
        <ul class="nav navbar-nav"><li><a href="/" id="home">Home</a></li><li><a href="/get-started/overview/" id="guides">Guides</a></li><li><a href="/desktop/" id="manuals">Manuals</a></li><li><a href="/reference/" id="reference">Reference</a></li><li><a href="/samples/" id="samples">Samples</a></li></ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle" aria-label="Current page's menu toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
    </div>
</div>
<div class="row hidden-sm hidden-xs">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li><a href="/" title="Docker docs homepage"><i class="fa fa-home"></i></a></li>
            <li><a href="/get-started/overview/">Guides</a></li><li><a>Run your app in production</a></li><li><a href="/network/">Configure networking</a></li><li><a href="/network/links/">Legacy networking content</a></li><li><a href="/network/links/">(Legacy) Container links</a></li></ol>
    </nav>
</div></div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section"><h1>Legacy container links</h1><p><em class="reading-time">Estimated reading time: 15 minutes</em></p><blockquote class="warning">
  <p><strong>Warning</strong></p>

  <p>The <code class="language-plaintext highlighter-rouge">--link</code> flag is a legacy feature of Docker. It may eventually
be removed. Unless you absolutely need to continue using it, we recommend that you use
user-defined networks to facilitate communication between two containers instead of using
<code class="language-plaintext highlighter-rouge">--link</code>. One feature that user-defined networks do not support that you can do
with <code class="language-plaintext highlighter-rouge">--link</code> is sharing environment variables between containers. However,
you can use other mechanisms such as volumes to share environment variables
between containers in a more controlled way.</p>

  <p>See <a href="/network/bridge/#differences-between-user-defined-bridges-and-the-default-bridge">Differences between user-defined bridges and the default bridge</a>
for some alternatives to using <code class="language-plaintext highlighter-rouge">--link</code>.</p>
</blockquote>

<p>The information in this section explains legacy container links within the
Docker default <code class="language-plaintext highlighter-rouge">bridge</code> network which is created automatically when you install
Docker.</p>

<p>Before the <a href="/network/">Docker networks feature</a>, you could use the
Docker link feature to allow containers to discover each other and securely
transfer information about one container to another container. With the
introduction of the Docker networks feature, you can still create links but they
behave differently between default <code class="language-plaintext highlighter-rouge">bridge</code> network and
<a href="/network/bridge/#differences-between-user-defined-bridges-and-the-default-bridge">user defined networks</a>.</p>

<p>This section briefly discusses connecting via a network port and then goes into
detail on container linking in default <code class="language-plaintext highlighter-rouge">bridge</code> network.</p>

<h2 id="connect-using-network-port-mapping">Connect using network port mapping</h2>

<p>Let’s say you used this command to run a simple Python Flask application:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">-d</span> <span class="nt">-P</span> training/webapp python app.py
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>:
Containers have an internal network and an IP address.
Docker can have a variety of network configurations. You can see more
information on Docker networking <a href="/network/">here</a>.</p>
</blockquote>

<p>When that container was created, the <code class="language-plaintext highlighter-rouge">-P</code> flag was used to automatically map
any network port inside it to a random high port within an <em>ephemeral port
range</em> on your Docker host. Next, when <code class="language-plaintext highlighter-rouge">docker ps</code> was run, you saw that port
5000 in the container was bound to port 49155 on the host.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker ps nostalgic_morse
<span class="go">
CONTAINER ID  IMAGE                   COMMAND       CREATED        STATUS        PORTS                    NAMES
</span><span class="gp">bc533791f3f5  training/webapp:latest  python app.py 5 seconds ago  Up 2 seconds  0.0.0.0:49155-&gt;</span>5000/tcp  nostalgic_morse
</code></pre></div></div>

<p>You also saw how you can bind a container’s ports to a specific port using
the <code class="language-plaintext highlighter-rouge">-p</code> flag. Here port 80 of the host is mapped to port 5000 of the
container:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">-d</span> <span class="nt">-p</span> 80:5000 training/webapp python app.py
</code></pre></div></div>

<p>And you saw why this isn’t such a great idea because it constrains you to
only one container on that specific port.</p>

<p>Instead, you may specify a range of host ports to bind a container port to
that is different than the default <em>ephemeral port range</em>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">-d</span> <span class="nt">-p</span> 8000-9000:5000 training/webapp python app.py
</code></pre></div></div>

<p>This would bind port 5000 in the container to a randomly available port
between 8000 and 9000 on the host.</p>

<p>There are also a few other ways you can configure the <code class="language-plaintext highlighter-rouge">-p</code> flag. By
default the <code class="language-plaintext highlighter-rouge">-p</code> flag binds the specified port to all interfaces on
the host machine. But you can also specify a binding to a specific
interface, for example only to the <code class="language-plaintext highlighter-rouge">localhost</code>.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">-d</span> <span class="nt">-p</span> 127.0.0.1:80:5000 training/webapp python app.py
</code></pre></div></div>

<p>This would bind port 5000 inside the container to port 80 on the
<code class="language-plaintext highlighter-rouge">localhost</code> or <code class="language-plaintext highlighter-rouge">127.0.0.1</code> interface on the host machine.</p>

<p>Or, to bind port 5000 of the container to a dynamic port but only on the
<code class="language-plaintext highlighter-rouge">localhost</code>, you could use:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">-d</span> <span class="nt">-p</span> 127.0.0.1::5000 training/webapp python app.py
</code></pre></div></div>

<p>You can also bind UDP and SCTP (typically used by telecom protocols such as SIGTRAN, Diameter, and S1AP/X2AP) ports by adding a trailing <code class="language-plaintext highlighter-rouge">/udp</code> or <code class="language-plaintext highlighter-rouge">/sctp</code>. For example:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">-d</span> <span class="nt">-p</span> 127.0.0.1:80:5000/udp training/webapp python app.py
</code></pre></div></div>

<p>You also learned about the useful <code class="language-plaintext highlighter-rouge">docker port</code> shortcut which showed us the
current port bindings. This is also useful for showing you specific port
configurations. For example, if you’ve bound the container port to the
<code class="language-plaintext highlighter-rouge">localhost</code> on the host machine, then the <code class="language-plaintext highlighter-rouge">docker port</code> output reflects that.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker port nostalgic_morse 5000
<span class="go">
127.0.0.1:49155
</span></code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>:
The <code class="language-plaintext highlighter-rouge">-p</code> flag can be used multiple times to configure multiple ports.</p>
</blockquote>

<h2 id="connect-with-the-linking-system">Connect with the linking system</h2>

<blockquote>
  <p><strong>Note</strong>:
This section covers the legacy link feature in the default <code class="language-plaintext highlighter-rouge">bridge</code> network.
Refer to <a href="/network/bridge/#differences-between-user-defined-bridges-and-the-default-bridge">differences between user-defined bridges and the default bridge</a>
for more information on links in user-defined networks.</p>
</blockquote>

<p>Network port mappings are not the only way Docker containers can connect to one
another. Docker also has a linking system that allows you to link multiple
containers together and send connection information from one to another. When
containers are linked, information about a source container can be sent to a
recipient container. This allows the recipient to see selected data describing
aspects of the source container.</p>

<h3 id="the-importance-of-naming">The importance of naming</h3>

<p>To establish links, Docker relies on the names of your containers.
You’ve already seen that each container you create has an automatically
created name; indeed you’ve become familiar with our old friend
<code class="language-plaintext highlighter-rouge">nostalgic_morse</code> during this guide. You can also name containers
yourself. This naming provides two useful functions:</p>

<ol>
  <li>
    <p>It can be useful to name containers that do specific functions in a way
that makes it easier for you to remember them, for example naming a
container containing a web application <code class="language-plaintext highlighter-rouge">web</code>.</p>
  </li>
  <li>
    <p>It provides Docker with a reference point that allows it to refer to other
containers, for example, you can specify to link the container <code class="language-plaintext highlighter-rouge">web</code> to container <code class="language-plaintext highlighter-rouge">db</code>.</p>
  </li>
</ol>

<p>You can name your container by using the <code class="language-plaintext highlighter-rouge">--name</code> flag, for example:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">-d</span> <span class="nt">-P</span> <span class="nt">--name</span> web training/webapp python app.py
</code></pre></div></div>

<p>This launches a new container and uses the <code class="language-plaintext highlighter-rouge">--name</code> flag to
name the container <code class="language-plaintext highlighter-rouge">web</code>. You can see the container’s name using the
<code class="language-plaintext highlighter-rouge">docker ps</code> command.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker ps <span class="nt">-l</span>
<span class="go">
CONTAINER ID  IMAGE                  COMMAND        CREATED       STATUS       PORTS                    NAMES
</span><span class="gp">aed84ee21bde  training/webapp:latest python app.py  12 hours ago  Up 2 seconds 0.0.0.0:49154-&gt;</span>5000/tcp  web
</code></pre></div></div>

<p>You can also use <code class="language-plaintext highlighter-rouge">docker inspect</code> to return the container’s name.</p>

<blockquote>
  <p><strong>Note</strong>:
Container names must be unique. That means you can only call
one container <code class="language-plaintext highlighter-rouge">web</code>. If you want to re-use a container name you must delete
the old container (with <code class="language-plaintext highlighter-rouge">docker container rm</code>) before you can create a new
container with the same name. As an alternative you can use the <code class="language-plaintext highlighter-rouge">--rm</code>
flag with the <code class="language-plaintext highlighter-rouge">docker run</code> command. This deletes the container
immediately after it is stopped.</p>
</blockquote>

<h2 id="communication-across-links">Communication across links</h2>

<p>Links allow containers to discover each other and securely transfer information
about one container to another container. When you set up a link, you create a
conduit between a source container and a recipient container. The recipient can
then access select data about the source. To create a link, you use the <code class="language-plaintext highlighter-rouge">--link</code>
flag. First, create a new container, this time one containing a database.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">-d</span> <span class="nt">--name</span> db training/postgres
</code></pre></div></div>

<p>This creates a new container called <code class="language-plaintext highlighter-rouge">db</code> from the <code class="language-plaintext highlighter-rouge">training/postgres</code>
image, which contains a PostgreSQL database.</p>

<p>Now, you need to delete the <code class="language-plaintext highlighter-rouge">web</code> container you created previously so you can replace it
with a linked one:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker container <span class="nb">rm</span> <span class="nt">-f</span> web
</code></pre></div></div>

<p>Now, create a new <code class="language-plaintext highlighter-rouge">web</code> container and link it with your <code class="language-plaintext highlighter-rouge">db</code> container.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">-d</span> <span class="nt">-P</span> <span class="nt">--name</span> web <span class="nt">--link</span> db:db training/webapp python app.py
</code></pre></div></div>

<p>This links the new <code class="language-plaintext highlighter-rouge">web</code> container with the <code class="language-plaintext highlighter-rouge">db</code> container you created
earlier. The <code class="language-plaintext highlighter-rouge">--link</code> flag takes the form:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--link &lt;name or id&gt;:alias
</code></pre></div></div>

<p>Where <code class="language-plaintext highlighter-rouge">name</code> is the name of the container we’re linking to and <code class="language-plaintext highlighter-rouge">alias</code> is an
alias for the link name. That alias is used shortly.
The <code class="language-plaintext highlighter-rouge">--link</code> flag also takes the form:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--link &lt;name or id&gt;
</code></pre></div></div>

<p>In this case the alias matches the name. You could write the previous
example as:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">-d</span> <span class="nt">-P</span> <span class="nt">--name</span> web <span class="nt">--link</span> db training/webapp python app.py
</code></pre></div></div>

<p>Next, inspect your linked containers with <code class="language-plaintext highlighter-rouge">docker inspect</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker inspect <span class="nt">-f</span> <span class="s2">"{{ .HostConfig.Links }}"</span> web
<span class="go">
[/db:/web/db]
</span></code></pre></div></div>

<p>You can see that the <code class="language-plaintext highlighter-rouge">web</code> container is now linked to the <code class="language-plaintext highlighter-rouge">db</code> container
<code class="language-plaintext highlighter-rouge">web/db</code>. Which allows it to access information about the <code class="language-plaintext highlighter-rouge">db</code> container.</p>

<p>So what does linking the containers actually do? You’ve learned that a link allows a
source container to provide information about itself to a recipient container. In
our example, the recipient, <code class="language-plaintext highlighter-rouge">web</code>, can access information about the source <code class="language-plaintext highlighter-rouge">db</code>. To do
this, Docker creates a secure tunnel between the containers that doesn’t need to
expose any ports externally on the container; when we started the
<code class="language-plaintext highlighter-rouge">db</code> container we did not use either the <code class="language-plaintext highlighter-rouge">-P</code> or <code class="language-plaintext highlighter-rouge">-p</code> flags. That’s a big benefit of
linking: we don’t need to expose the source container, here the PostgreSQL database, to
the network.</p>

<p>Docker exposes connectivity information for the source container to the
recipient container in two ways:</p>

<ul>
  <li>Environment variables,</li>
  <li>Updating the <code class="language-plaintext highlighter-rouge">/etc/hosts</code> file.</li>
</ul>

<h3 id="environment-variables">Environment variables</h3>

<p>Docker creates several environment variables when you link containers. Docker
automatically creates environment variables in the target container based on
the <code class="language-plaintext highlighter-rouge">--link</code> parameters. It also exposes all environment variables
originating from Docker from the source container. These include variables from:</p>

<ul>
  <li>the <code class="language-plaintext highlighter-rouge">ENV</code> commands in the source container’s Dockerfile</li>
  <li>the <code class="language-plaintext highlighter-rouge">-e</code>, <code class="language-plaintext highlighter-rouge">--env</code>, and <code class="language-plaintext highlighter-rouge">--env-file</code> options on the <code class="language-plaintext highlighter-rouge">docker run</code>
command when the source container is started</li>
</ul>

<p>These environment variables enable programmatic discovery from within the
target container of information related to the source container.</p>

<blockquote class="warning">
  <p><strong>Warning</strong>:
It is important to understand that <em>all</em> environment variables originating
from Docker within a container are made available to <em>any</em> container
that links to it. This could have serious security implications if sensitive
data is stored in them.</p>
</blockquote>

<p>Docker sets an <code class="language-plaintext highlighter-rouge">&lt;alias&gt;_NAME</code> environment variable for each target container
listed in the <code class="language-plaintext highlighter-rouge">--link</code> parameter. For example, if a new container called
<code class="language-plaintext highlighter-rouge">web</code> is linked to a database container called <code class="language-plaintext highlighter-rouge">db</code> via <code class="language-plaintext highlighter-rouge">--link db:webdb</code>,
then Docker creates a <code class="language-plaintext highlighter-rouge">WEBDB_NAME=/web/webdb</code> variable in the <code class="language-plaintext highlighter-rouge">web</code> container.</p>

<p>Docker also defines a set of environment variables for each port exposed by the
source container. Each variable has a unique prefix in the form:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;name&gt;_PORT_&lt;port&gt;_&lt;protocol&gt;
</code></pre></div></div>

<p>The components in this prefix are:</p>

<ul>
  <li>the alias <code class="language-plaintext highlighter-rouge">&lt;name&gt;</code> specified in the <code class="language-plaintext highlighter-rouge">--link</code> parameter (for example, <code class="language-plaintext highlighter-rouge">webdb</code>)</li>
  <li>the <code class="language-plaintext highlighter-rouge">&lt;port&gt;</code> number exposed</li>
  <li>a <code class="language-plaintext highlighter-rouge">&lt;protocol&gt;</code> which is either TCP or UDP</li>
</ul>

<p>Docker uses this prefix format to define three distinct environment variables:</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">prefix_ADDR</code> variable contains the IP Address from the URL, for
example <code class="language-plaintext highlighter-rouge">WEBDB_PORT_5432_TCP_ADDR=172.17.0.82</code>.</li>
  <li>The <code class="language-plaintext highlighter-rouge">prefix_PORT</code> variable contains just the port number from the URL for
example <code class="language-plaintext highlighter-rouge">WEBDB_PORT_5432_TCP_PORT=5432</code>.</li>
  <li>The <code class="language-plaintext highlighter-rouge">prefix_PROTO</code> variable contains just the protocol from the URL for
example <code class="language-plaintext highlighter-rouge">WEBDB_PORT_5432_TCP_PROTO=tcp</code>.</li>
</ul>

<p>If the container exposes multiple ports, an environment variable set is
defined for each one. This means, for example, if a container exposes 4 ports
that Docker creates 12 environment variables, 3 for each port.</p>

<p>Additionally, Docker creates an environment variable called <code class="language-plaintext highlighter-rouge">&lt;alias&gt;_PORT</code>.
This variable contains the URL of the source container’s first exposed port.
The ‘first’ port is defined as the exposed port with the lowest number.
For example, consider the <code class="language-plaintext highlighter-rouge">WEBDB_PORT=tcp://172.17.0.82:5432</code> variable. If
that port is used for both tcp and udp, then the tcp one is specified.</p>

<p>Finally, Docker also exposes each Docker originated environment variable
from the source container as an environment variable in the target. For each
variable Docker creates an <code class="language-plaintext highlighter-rouge">&lt;alias&gt;_ENV_&lt;name&gt;</code> variable in the target
container. The variable’s value is set to the value Docker used when it
started the source container.</p>

<p>Returning back to our database example, you can run the <code class="language-plaintext highlighter-rouge">env</code>
command to list the specified container’s environment variables.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">--rm</span> <span class="nt">--name</span> web2 <span class="nt">--link</span> db:db training/webapp <span class="nb">env</span>
<span class="go">
</span><span class="c">&lt;...&gt;
</span><span class="go">DB_NAME=/web2/db
DB_PORT=tcp://172.17.0.5:5432
DB_PORT_5432_TCP=tcp://172.17.0.5:5432
DB_PORT_5432_TCP_PROTO=tcp
DB_PORT_5432_TCP_PORT=5432
DB_PORT_5432_TCP_ADDR=172.17.0.5
</span><span class="c">&lt;...&gt;
</span></code></pre></div></div>

<p>You can see that Docker has created a series of environment variables with
useful information about the source <code class="language-plaintext highlighter-rouge">db</code> container. Each variable is prefixed
with
<code class="language-plaintext highlighter-rouge">DB_</code>, which is populated from the <code class="language-plaintext highlighter-rouge">alias</code> you specified above. If the <code class="language-plaintext highlighter-rouge">alias</code>
were <code class="language-plaintext highlighter-rouge">db1</code>, the variables would be prefixed with <code class="language-plaintext highlighter-rouge">DB1_</code>. You can use these
environment variables to configure your applications to connect to the database
on the <code class="language-plaintext highlighter-rouge">db</code> container. The connection is secure and private; only the
linked <code class="language-plaintext highlighter-rouge">web</code> container can communicate with the <code class="language-plaintext highlighter-rouge">db</code> container.</p>

<h3 id="important-notes-on-docker-environment-variables">Important notes on Docker environment variables</h3>

<p>Unlike host entries in the <a href="#updating-the-etchosts-file"><code class="language-plaintext highlighter-rouge">/etc/hosts</code> file</a>,
IP addresses stored in the environment variables are not automatically updated
if the source container is restarted. We recommend using the host entries in
<code class="language-plaintext highlighter-rouge">/etc/hosts</code> to resolve the IP address of linked containers.</p>

<p>These environment variables are only set for the first process in the
container. Some daemons, such as <code class="language-plaintext highlighter-rouge">sshd</code>, scrub them when spawning shells
for connection.</p>

<h3 id="updating-the-etchosts-file">Updating the <code class="language-plaintext highlighter-rouge">/etc/hosts</code> file</h3>

<p>In addition to the environment variables, Docker adds a host entry for the
source container to the <code class="language-plaintext highlighter-rouge">/etc/hosts</code> file. Here’s an entry for the <code class="language-plaintext highlighter-rouge">web</code>
container:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">-t</span> <span class="nt">-i</span> <span class="nt">--rm</span> <span class="nt">--link</span> db:webdb training/webapp /bin/bash
<span class="go">
</span><span class="gp">root@aed84ee21bde:/opt/webapp#</span><span class="w"> </span><span class="nb">cat</span> /etc/hosts
<span class="go">172.17.0.7  aed84ee21bde
</span><span class="c">&lt;...&gt;
</span><span class="go">172.17.0.5  webdb 6e5cdeb2d300 db
</span></code></pre></div></div>

<p>You can see two relevant host entries. The first is an entry for the <code class="language-plaintext highlighter-rouge">web</code>
container that uses the Container ID as a host name. The second entry uses the
link alias to reference the IP address of the <code class="language-plaintext highlighter-rouge">db</code> container. In addition to
the alias you provide, the linked container’s name, if unique from the alias
provided to the <code class="language-plaintext highlighter-rouge">--link</code> parameter, and the linked container’s hostname are
also added to <code class="language-plaintext highlighter-rouge">/etc/hosts</code> for the linked container’s IP address. You can ping
that host via any of these entries:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@aed84ee21bde:/opt/webapp#</span><span class="w"> </span>apt-get <span class="nb">install</span> <span class="nt">-yqq</span> inetutils-ping
<span class="gp">root@aed84ee21bde:/opt/webapp#</span><span class="w"> </span>ping webdb
<span class="go">
PING webdb (172.17.0.5): 48 data bytes
56 bytes from 172.17.0.5: icmp_seq=0 ttl=64 time=0.267 ms
56 bytes from 172.17.0.5: icmp_seq=1 ttl=64 time=0.250 ms
56 bytes from 172.17.0.5: icmp_seq=2 ttl=64 time=0.256 ms
</span></code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>:
In the example, you had to install <code class="language-plaintext highlighter-rouge">ping</code> because it was not included
in the container initially.</p>
</blockquote>

<p>Here, you used the <code class="language-plaintext highlighter-rouge">ping</code> command to ping the <code class="language-plaintext highlighter-rouge">db</code> container using its host entry,
which resolves to <code class="language-plaintext highlighter-rouge">172.17.0.5</code>. You can use this host entry to configure an application
to make use of your <code class="language-plaintext highlighter-rouge">db</code> container.</p>

<blockquote>
  <p><strong>Note</strong>:
You can link multiple recipient containers to a single source. For
example, you could have multiple (differently named) web containers attached to your
<code class="language-plaintext highlighter-rouge">db</code> container.</p>
</blockquote>

<p>If you restart the source container, the <code class="language-plaintext highlighter-rouge">/etc/hosts</code> files on the linked containers
are automatically updated with the source container’s new IP address,
allowing linked communication to continue.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker restart db
<span class="go">db

</span><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">-t</span> <span class="nt">-i</span> <span class="nt">--rm</span> <span class="nt">--link</span> db:db training/webapp /bin/bash
<span class="go">
</span><span class="gp">root@aed84ee21bde:/opt/webapp#</span><span class="w"> </span><span class="nb">cat</span> /etc/hosts
<span class="go">172.17.0.7  aed84ee21bde
</span><span class="c">&lt;...&gt;
</span><span class="go">172.17.0.9  db
</span></code></pre></div></div>
<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="/search/?q=Examples">Examples</a>, <a href="/search/?q=Usage">Usage</a>, <a href="/search/?q=user guide">user guide</a>, <a href="/search/?q=links">links</a>, <a href="/search/?q=linking">linking</a>, <a href="/search/?q=docker">docker</a>, <a href="/search/?q=documentation">documentation</a>, <a href="/search/?q=examples">examples</a>, <a href="/search/?q=names">names</a>, <a href="/search/?q=name">name</a>, <a href="/search/?q=container naming">container naming</a>, <a href="/search/?q=port">port</a>, <a href="/search/?q=map">map</a>, <a href="/search/?q=network port">network port</a>, <a href="/search/?q=network">network</a></span></section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
                                <ul class="nav hidden-md hidden-lg"></ul>
                                <ul class="nav" id="jsTOCLeftNav"></ul>
                            </div>
                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul><li><a href="https://github.com/docker/docker.github.io/edit/master/network/links.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit this page</a></li><li><a href="https://github.com/docker/docker.github.io/issues/new?body=File: [network/links.md](https://docs.docker.com/network/links/)" class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> Request docs changes</a></li><li><div class="toggle-mode">
  <div class="icon">
      <i class="fa fa-sun-o" aria-hidden="true"></i>
  </div>
  <div class="toggle-switch">
      <label class="switch">
          <input type="checkbox" id="switch-style">
          <span class="slider round"></span>
      </label>
  </div>
  <div class="icon">
      <i class="fa fa-moon-o" aria-hidden="true"></i>
  </div>
</div>
</li>
                                    </ul>
                                </div><div id="side-toc-title">On this page:</div>
<ul id="my_toc" class="inline_toc">
  <li><a href="#connect-using-network-port-mapping" class="nomunge">Connect using network port mapping</a></li>
  <li><a href="#connect-with-the-linking-system" class="nomunge">Connect with the linking system</a>
    <ul>
      <li><a href="#the-importance-of-naming" class="nomunge">The importance of naming</a></li>
    </ul>
  </li>
  <li><a href="#communication-across-links" class="nomunge">Communication across links</a>
    <ul>
      <li><a href="#environment-variables" class="nomunge">Environment variables</a></li>
      <li><a href="#important-notes-on-docker-environment-variables" class="nomunge">Important notes on Docker environment variables</a></li>
      <li><a href="#updating-the-etchosts-file" class="nomunge">Updating the /etc/hosts file</a></li>
    </ul>
  </li>
</ul>

</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products" target="_blank" rel="noopener">Product offerings</a></b></li>
                        <li><a href="https://www.docker.com/products/personal" target="_blank" rel="noopener">Docker Personal</a></li>
                        <li><a href="https://www.docker.com/products/pro" target="_blank" rel="noopener">Docker Pro</a></li>
                        <li><a href="https://www.docker.com/products/team" target="_blank" rel="noopener">Docker Team</a></li>
                        <li><a href="https://www.docker.com/products/business" target="_blank" rel="noopener">Docker Business</a></li>
                        <li><a href="https://www.docker.com/products" target="_blank" rel="noopener">Compare Subscriptions</a></li>
                        <li><b><a href="https://www.docker.com/" target="_blank" rel="noopener">Features</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub" target="_blank" rel="noopener">Docker Hub</a></li>
                        <li><a href="https://www.docker.com/products/secure-software-supply-chain" target="_blank" rel="noopener">Secure Software Supply Chain</a></li>
                        <li><a href="https://www.docker.com/products/container-runtime" target="_blank" rel="noopener">Container Runtime</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools" target="_blank" rel="noopener">Developer Tools</a></li>
                        <li><a href="https://www.docker.com/partners" target="_blank" rel="noopener">Trusted Content</a></li>
                        <li><a href="https://www.docker.com/roadmap" target="_blank" rel="noopener">Docker Product Roadmap</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">Developers</a></b></li>
                        <li><a href="https://www.docker.com/use-cases" target="_blank" rel="noopener">Use Cases</a></li>
                        <li><a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener">Get Started</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank" rel="noopener">Blog</a></li>
                        <li><a href="https://www.docker.com/docker-community" target="_blank" rel="noopener">Community</a></li>
                        <li><a href="https://www.docker.com/open-source" target="_blank" rel="noopener">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/get-involved/developer-preview" target="_blank" rel="noopener">Preview Program</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">Pricing</a></b></li>
                        <li><a href="https://www.docker.com/pricing/faq" target="_blank" rel="noopener">FAQ</a></li>
                        <li><a href="https://www.docker.com/partners/programs" target="_blank" rel="noopener">Docker Verified Publisher</a></li>
                        <li><a href="https://www.docker.com/partners" target="_blank" rel="noopener">Partners</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank" rel="noopener">About Us</a></b></li>
                        <li><a href="https://www.docker.com/what-container" target="_blank" rel="noopener">What is a Container?</a></li>
                        <li><a href="https://www.docker.com/why-docker" target="_blank" rel="noopener">Why Docker?</a></li>
                        <li><a href="https://www.docker.com/events" target="_blank" rel="noopener">Virtual Events</a></li>
                        <li><a href="https://www.docker.com/swag" target="_blank" rel="noopener">Swag Store
                        </a></li>
                        <li><a href="https://www.docker.com/company/newsroom" target="_blank" rel="noopener">Newsroom</a></li>
                        <li><a href="https://www.docker.com/careers" target="_blank" rel="noopener">Careers</a></li>
                        <li><a href="https://www.docker.com/company/contact" target="_blank" rel="noopener">Contact Us</a></li>
                        <li><a href="https://www.docker.com/customers" target="_blank" rel="noopener">Customers</a></li>
                        <li><a href="https://www.docker.com/newsletter-subscription" target="_blank" rel="noopener">Newsletter</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="https://www.docker.com/legal/docker-terms-service" target="_blank" rel="noopener">Terms of Service</a></li>
                        <li><a href="https://status.docker.com/" target="_blank" rel="noopener">Status</a></li>
                        <li><a href="https://www.docker.com/legal" target="_blank" rel="noopener">Legal</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2021 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="https://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="https://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <script>const pageURL = "/network/links/";</script></body>
</html>

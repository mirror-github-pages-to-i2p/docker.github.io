<!DOCTYPE html>
<!-- Page generated 2022-07-02 18:47:56 +0000-->
<html lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex"/><title>Automated repository tests | Docker Documentation</title>
  <meta name="description" content="Automated tests" />
  <meta name="keywords" content="Automated, testing, repository">
  <link rel="canonical" href="https://localhost:4000/docker-hub/builds/automated-testing/" />

  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/favicons/docs@2x.ico" sizes="129x128">
  <link rel="apple-touch-icon" type="image/x-icon" href="/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/favicons/docs@2x.ico">
  <meta property="og:image" content="/favicons/docs@2x.ico"/>
  <meta name="theme-color" content="#2496ed" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- hide elements that are only shown without JavaScript enabled -->
  <script>document.documentElement.classList.add('js')</script>
  <style>html.js .no-js { display: none !important; }</style><script defer src="/js/theme-switcher.js"></script>
  <script defer src="/js/anchorlinks.js"></script>
  <script defer src="/js/jquery.js"></script>
  <script defer src="/js/bootstrap.min.js"></script>
  <script defer src="/js/docs.js"></script><link rel="preload" as="font" href="https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/geomanist/hinted-Geomanist-Book.woff2"    type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/geomanist/hinted-Geomanist-Regular.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/glyphicons-halflings-regular.woff2"       type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/fonts/fontawesome-webfont.woff2?v=4.7.0"        type="font/woff2" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css" id="pagestyle">

  <!-- SEO stuff -->
  <meta name="twitter:title" itemprop="title name" content="Automated repository tests"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="" />
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:domain" content="docs.docker.com"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:image:src" content="https://docs.docker.com/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker Documentation"/>
  <meta property="og:title" content="Automated repository tests" />
  <meta property="og:description" content="Automated tests" />
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2022-07-02T18:47:56+00:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="https://docs.docker.com/images/docs@2x.png"/>
  <meta property="og:locale" content="en_US" />
  <meta property="og:url" content="https://docs.docker.com/docker-hub/builds/automated-testing/" />
  <meta property="og:site_name" content="Docker Documentation" />
  <meta property="article:published_time" itemprop="datePublished" content="2022-07-02T18:47:56+00:00"/>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","headline":"Automated repository tests","description":"Automated tests","url":"https://docs.docker.com/docker-hub/builds/automated-testing/"}</script>
  <!-- END SEO STUFF -->
</head>
<body class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/">
                <img class="logo" src="/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs" width="160" height="28" />
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/">
        <img src="/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs" width="30" height="30" />
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline" id="searchForm" action="/search/" method="get">
        <label for="st-search-input" class="sr-only">Search</label>
        <input class="search-field form-control ds-input" id="st-search-input" name="q" placeholder="Search the docs" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteResults"></div>
        <!-- <button type="submit" class="search-submit btn btn-default">Search</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div>
        <ul class="nav navbar-nav"><li><a href="/" id="home">Home</a></li><li><a href="/get-started/overview/" id="guides">Guides</a></li><li><a href="/desktop/" id="manuals">Manuals</a></li><li><a href="/reference/" id="reference">Reference</a></li><li><a href="/samples/" id="samples">Samples</a></li></ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle" aria-label="Current page's menu toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
    </div>
</div>
<div class="row hidden-sm hidden-xs">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li><a href="/" title="Docker docs homepage"><i class="fa fa-home"></i></a></li>
            <li><a href="/desktop/">Manuals</a></li><li><a href="/docker-hub/">Docker Hub</a></li><li><a href="/docker-hub/builds/">Automated builds</a></li><li><a href="/docker-hub/builds/automated-testing/">Testing in automated builds</a></li></ol>
    </nav>
</div></div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section"><h1>Automated repository tests</h1><p><em class="reading-time">Estimated reading time: 4 minutes</em></p><div class="docker-upgrade-cta" role="alert">
  <div class="docker-upgrade-cta__heading">
This feature requires a Docker subscription
  </div>
  <p>The Automated Builds feature is available for Docker Pro, Team, and Business users. Upgrade now to automatically build and push your images. If you are using automated builds for an open-source project, you can join our <a href="https://www.docker.com/community/open-source/application" target="_blank" rel="noopener" class="_">Open Source Community</a> program to learn how Docker can support your project on Docker Hub.</p>
 <a class="btn btn-primary" role="button" href="https://www.docker.com/pricing?utm_source=docker&amp;utm_medium=webreferral&amp;utm_campaign=docs_driven_upgrade_auto_builds" target="_blank"> Upgrade now </a>
</div>

<p>Docker Hub can automatically test changes to your source code repositories
using containers. You can enable <code class="language-plaintext highlighter-rouge">Autotest</code> on <a href="/docker-hub/repos/">any Docker Hub repository</a>
to run tests on each pull request to the source code repository to create a
continuous integration testing service.</p>

<p>Enabling <code class="language-plaintext highlighter-rouge">Autotest</code> builds an image for testing purposes, but does <strong>not</strong>
automatically push the built image to the Docker repository. If you want to push
built images to your Docker Hub repository, enable <a href="/docker-hub/builds/">Automated Builds</a>.</p>

<h2 id="set-up-automated-test-files">Set up automated test files</h2>

<p>To set up your automated tests, create a <code class="language-plaintext highlighter-rouge">docker-compose.test.yml</code> file which
defines a <code class="language-plaintext highlighter-rouge">sut</code> service that lists the tests to be run.
The <code class="language-plaintext highlighter-rouge">docker-compose.test.yml</code> file should be located in the same directory that
contains the Dockerfile used to build the image.</p>

<p>For example:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">services</span><span class="pi">:</span>
  <span class="na">sut</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
    <span class="na">command</span><span class="pi">:</span> <span class="s">run_tests.sh</span>
</code></pre></div></div>

<p>The example above builds the repository, and runs the <code class="language-plaintext highlighter-rouge">run_tests.sh</code> file inside
a container using the built image.</p>

<p>You can define any number of linked services in this file. The only requirement
is that <code class="language-plaintext highlighter-rouge">sut</code> is defined. Its return code determines if tests passed or not.
Tests <strong>pass</strong> if the <code class="language-plaintext highlighter-rouge">sut</code> service returns <code class="language-plaintext highlighter-rouge">0</code>, and <strong>fail</strong> otherwise.</p>

<blockquote>
  <p><strong>Note</strong></p>

  <p>Only the <code class="language-plaintext highlighter-rouge">sut</code> service and all other services listed in
<a href="/compose/compose-file/compose-file-v2/#depends_on"><code class="language-plaintext highlighter-rouge">depends_on</code></a> are
started. If you have services that poll for changes in other services, be sure
to include the polling services in the <a href="/compose/compose-file/compose-file-v2/#depends_on"><code class="language-plaintext highlighter-rouge">depends_on</code></a>
list to make sure all of your services start.
Also make sure to include a compose file version from 2.0 upward as <code class="language-plaintext highlighter-rouge">depends_on</code>
was added in <a href="/compose/compose-file/compose-versioning/#version-2">version 2.0</a>
file format.</p>
</blockquote>

<p>You can define more than one <code class="language-plaintext highlighter-rouge">docker-compose.test.yml</code> file if needed. Any file
that ends in <code class="language-plaintext highlighter-rouge">.test.yml</code> is used for testing, and the tests run sequentially.
You can also use <a href="/docker-hub/builds/advanced/#override-build-test-or-push-commands">custom build hooks</a>
to further customize your test behavior.</p>

<blockquote>
  <p><strong>Note</strong>: If you enable Automated builds, they also run any tests defined
in the <code class="language-plaintext highlighter-rouge">test.yml</code> files.</p>
</blockquote>

<h2 id="enable-automated-tests-on-a-repository">Enable automated tests on a repository</h2>

<p>To enable testing on a source code repository, you must first create an
associated build-repository in Docker Hub.  Your <code class="language-plaintext highlighter-rouge">Autotest</code> settings are
configured on the same page as <a href="/docker-hub/builds/">automated builds</a>, however
you do not need to enable Autobuilds to use <code class="language-plaintext highlighter-rouge">Autotest</code>. Autobuild is enabled per
branch or tag, and you do not need to enable it at all.</p>

<p>Only branches that are configured to use <strong>Autobuild</strong> push images to the
Docker repository, regardless of the Autotest settings.</p>

<ol>
  <li>
    <p>Log in to Docker Hub and select <strong>Repositories</strong> in the top navigation.</p>
  </li>
  <li>
    <p>Select the repository you want to enable <code class="language-plaintext highlighter-rouge">Autotest</code> on.</p>
  </li>
  <li>
    <p>From the repository view, click the <strong>Builds</strong> tab.</p>
  </li>
  <li>
    <p>Click <strong>Configure automated builds</strong>.</p>
  </li>
  <li>
    <p>Configure the automated build settings as explained in <a href="/docker-hub/builds/">Automated Builds</a>.</p>

    <p>At minimum you must configure:</p>

    <ul>
      <li>The source code repository</li>
      <li>the build location</li>
      <li>at least one build rule</li>
    </ul>
  </li>
  <li>
    <p>Choose your <strong>Autotest</strong> option.</p>

    <p>The following options are available:</p>

    <ul>
      <li>
        <p><code class="language-plaintext highlighter-rouge">Off</code>: No additional test builds. Tests only run if they’re configured
 as part of an automated build.</p>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">Internal pull requests</code>: Run a test build for any pull requests
 to branches that match a build rule, but only when the pull request comes
 from the same source repository.</p>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">Internal and external pull requests</code>: Run a test build for any
 pull requests to branches that match a build rule, including when the
 pull request originated in an external source repository.</p>
      </li>
    </ul>

    <blockquote>
      <p><strong>Note</strong>: For security purposes, autotest on <em>external pull requests</em> is
 limited on public repositories. Private images are not pulled and
 environment variables defined in Docker Hub are not
 available. Automated builds continue to work as usual.</p>
    </blockquote>
  </li>
  <li>
    <p>Click <strong>Save</strong> to save the settings, or click <strong>Save and build</strong> to save and
run an initial test.</p>
  </li>
</ol>

<h2 id="check-your-test-results">Check your test results</h2>

<p>From the repository’s details page, click <strong>Timeline</strong>.</p>

<p>From this tab you can see any pending, in-progress, successful, and failed
builds and test runs for the repository.</p>

<p>You can click any timeline entry to view the logs for each test run.</p>
<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="/search/?q=Automated">Automated</a>, <a href="/search/?q=testing">testing</a>, <a href="/search/?q=repository">repository</a></span></section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
                                <ul class="nav hidden-md hidden-lg"></ul>
                                <ul class="nav" id="jsTOCLeftNav"></ul>
                            </div>
                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul><li><a href="https://github.com/docker/docker.github.io/edit/master/docker-hub/builds/automated-testing.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit this page</a></li><li><a href="https://github.com/docker/docker.github.io/issues/new?body=File: [docker-hub/builds/automated-testing.md](https://docs.docker.com/docker-hub/builds/automated-testing/)" class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> Request docs changes</a></li><li><div class="toggle-mode">
  <div class="icon">
      <i class="fa fa-sun-o" aria-hidden="true"></i>
  </div>
  <div class="toggle-switch">
      <label class="switch">
          <input type="checkbox" id="switch-style">
          <span class="slider round"></span>
      </label>
  </div>
  <div class="icon">
      <i class="fa fa-moon-o" aria-hidden="true"></i>
  </div>
</div>
</li>
                                    </ul>
                                </div><div id="side-toc-title">On this page:</div>
<ul id="my_toc" class="inline_toc">
  <li><a href="#set-up-automated-test-files" class="nomunge">Set up automated test files</a></li>
  <li><a href="#enable-automated-tests-on-a-repository" class="nomunge">Enable automated tests on a repository</a></li>
  <li><a href="#check-your-test-results" class="nomunge">Check your test results</a></li>
</ul>

</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products" target="_blank" rel="noopener">Product offerings</a></b></li>
                        <li><a href="https://www.docker.com/products/personal" target="_blank" rel="noopener">Docker Personal</a></li>
                        <li><a href="https://www.docker.com/products/pro" target="_blank" rel="noopener">Docker Pro</a></li>
                        <li><a href="https://www.docker.com/products/team" target="_blank" rel="noopener">Docker Team</a></li>
                        <li><a href="https://www.docker.com/products/business" target="_blank" rel="noopener">Docker Business</a></li>
                        <li><a href="https://www.docker.com/products" target="_blank" rel="noopener">Compare Subscriptions</a></li>
                        <li><b><a href="https://www.docker.com/" target="_blank" rel="noopener">Features</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub" target="_blank" rel="noopener">Docker Hub</a></li>
                        <li><a href="https://www.docker.com/products/secure-software-supply-chain" target="_blank" rel="noopener">Secure Software Supply Chain</a></li>
                        <li><a href="https://www.docker.com/products/container-runtime" target="_blank" rel="noopener">Container Runtime</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools" target="_blank" rel="noopener">Developer Tools</a></li>
                        <li><a href="https://www.docker.com/partners" target="_blank" rel="noopener">Trusted Content</a></li>
                        <li><a href="https://www.docker.com/roadmap" target="_blank" rel="noopener">Docker Product Roadmap</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">Developers</a></b></li>
                        <li><a href="https://www.docker.com/use-cases" target="_blank" rel="noopener">Use Cases</a></li>
                        <li><a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener">Get Started</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank" rel="noopener">Blog</a></li>
                        <li><a href="https://www.docker.com/docker-community" target="_blank" rel="noopener">Community</a></li>
                        <li><a href="https://www.docker.com/open-source" target="_blank" rel="noopener">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/get-involved/developer-preview" target="_blank" rel="noopener">Preview Program</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">Pricing</a></b></li>
                        <li><a href="https://www.docker.com/pricing/faq" target="_blank" rel="noopener">FAQ</a></li>
                        <li><a href="https://www.docker.com/partners/programs" target="_blank" rel="noopener">Docker Verified Publisher</a></li>
                        <li><a href="https://www.docker.com/partners" target="_blank" rel="noopener">Partners</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank" rel="noopener">About Us</a></b></li>
                        <li><a href="https://www.docker.com/what-container" target="_blank" rel="noopener">What is a Container?</a></li>
                        <li><a href="https://www.docker.com/why-docker" target="_blank" rel="noopener">Why Docker?</a></li>
                        <li><a href="https://www.docker.com/events" target="_blank" rel="noopener">Virtual Events</a></li>
                        <li><a href="https://www.docker.com/swag" target="_blank" rel="noopener">Swag Store
                        </a></li>
                        <li><a href="https://www.docker.com/company/newsroom" target="_blank" rel="noopener">Newsroom</a></li>
                        <li><a href="https://www.docker.com/careers" target="_blank" rel="noopener">Careers</a></li>
                        <li><a href="https://www.docker.com/company/contact" target="_blank" rel="noopener">Contact Us</a></li>
                        <li><a href="https://www.docker.com/customers" target="_blank" rel="noopener">Customers</a></li>
                        <li><a href="https://www.docker.com/newsletter-subscription" target="_blank" rel="noopener">Newsletter</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="https://www.docker.com/legal/docker-terms-service" target="_blank" rel="noopener">Terms of Service</a></li>
                        <li><a href="https://status.docker.com/" target="_blank" rel="noopener">Status</a></li>
                        <li><a href="https://www.docker.com/legal" target="_blank" rel="noopener">Legal</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2021 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="https://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="https://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <script>const pageURL = "/docker-hub/builds/automated-testing/";</script></body>
</html>
